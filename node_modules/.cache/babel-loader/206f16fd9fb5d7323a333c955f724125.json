{"ast":null,"code":"import _regeneratorRuntime from\"/Users/miguelmerchan/Documents/GitHub/6-Leidy2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/miguelmerchan/Documents/GitHub/6-Leidy2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/miguelmerchan/Documents/GitHub/6-Leidy2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/miguelmerchan/Documents/GitHub/6-Leidy2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/miguelmerchan/Documents/GitHub/6-Leidy2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/miguelmerchan/Documents/GitHub/6-Leidy2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Web3 from\"web3\";import Home from\"../V1Home\";import TronLinkGuide from\"../TronLinkGuide\";import cons from\"../../cons\";import abiToken from\"../../token\";import abiBinario from\"../../binary\";var addressToken=cons.TOKEN;var addressBinary=cons.SC2;var App=/*#__PURE__*/function(_Component){_inherits(App,_Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.state={admin:false,metamask:false,conectado:false,currentAccount:null,binanceM:{web3:null,contractToken:null,contractBinary:null}};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this2=this;var resultado,web3,contractToken,contractBinary,isAdmin;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(typeof window.ethereum!=='undefined')){_context2.next=8;break;}_context2.next=3;return window.ethereum.request({method:'eth_requestAccounts'});case 3:resultado=_context2.sent;console.log(resultado[0]);this.setState({currentAccount:resultado[0],metamask:true,conectado:true});_context2.next=9;break;case 8:this.setState({metamask:false,conectado:false});case 9:setInterval(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var resultado;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(typeof window.ethereum!=='undefined')){_context.next=8;break;}_context.next=3;return window.ethereum.request({method:'eth_requestAccounts'});case 3:resultado=_context.sent;console.log(resultado[0]);_this2.setState({currentAccount:resultado[0],metamask:true,conectado:true});_context.next=9;break;case 8:_this2.setState({metamask:false,conectado:false});case 9:case\"end\":return _context.stop();}}},_callee);})),7*1000);try{web3=new Web3(window.web3.currentProvider);// mainet... metamask\ncontractToken=new web3.eth.Contract(abiToken,addressToken);contractBinary=new web3.eth.Contract(abiBinario,addressBinary);isAdmin=true;//await contractBinary.methods.admin(this.state.currentAccount).call({from:this.state.currentAccount});\nthis.setState({admin:isAdmin,binanceM:{web3:web3,contractToken:contractToken,contractBinary:contractBinary}});//web3 = new Web3(new Web3.providers.HttpProvider(\"https://data-seed-prebsc-1-s1.binance.org:8545/\"));\n}catch(error){alert(error);}case 11:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var getString=\"\";var loc=document.location.href;//console.log(loc);\nif(loc.indexOf('?')>0){getString=loc.split('?')[1];getString=getString.split('#')[0];}if(!this.state.metamask)return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(TronLinkGuide,null)));if(!this.state.conectado)return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(TronLinkGuide,{installed:true})));switch(getString){case\"v1\":case\"V1\":return/*#__PURE__*/React.createElement(Home,{admin:this.state.admin,contractAddress:cons.SC2,version:\"4\",wallet:this.state.binanceM,currentAccount:this.state.currentAccount});case\"v2\":case\"V2\":return/*#__PURE__*/React.createElement(Home,{admin:this.state.admin,contractAddress:cons.SC2,version:\"4\",wallet:this.state.binanceM,currentAccount:this.state.currentAccount});case\"shasta\":case\"test\":case\"v0\":case\"V0\":return/*#__PURE__*/React.createElement(Home,{admin:this.state.admin,contractAddress:cons.SCtest,version:\"999\",wallet:this.state.binanceM,currentAccount:this.state.currentAccount});default:return/*#__PURE__*/React.createElement(Home,{admin:this.state.admin,contractAddress:cons.SC2,version:\"4\",wallet:this.state.binanceM,currentAccount:this.state.currentAccount});}}}]);return App;}(Component);export default App;// {tWeb()}","map":{"version":3,"sources":["/Users/miguelmerchan/Documents/GitHub/6-Leidy2/src/components/App/index.js"],"names":["React","Component","Web3","Home","TronLinkGuide","cons","abiToken","abiBinario","addressToken","TOKEN","addressBinary","SC2","App","props","state","admin","metamask","conectado","currentAccount","binanceM","web3","contractToken","contractBinary","window","ethereum","request","method","resultado","console","log","setState","setInterval","currentProvider","eth","Contract","isAdmin","error","alert","getString","loc","document","location","href","indexOf","split","SCtest"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport Web3 from \"web3\";\n\nimport Home from \"../V1Home\";\nimport TronLinkGuide from \"../TronLinkGuide\";\nimport cons from \"../../cons\"\n\nimport abiToken from \"../../token\";\nimport abiBinario from \"../../binary\";\n\nconst addressToken = cons.TOKEN;\nconst addressBinary = cons.SC2;\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      admin: false,\n      metamask: false,\n      conectado: false,\n      currentAccount: null,\n      binanceM:{\n        web3: null,\n        contractToken: null,\n        contractBinary: null\n      }\n      \n    };\n  }\n\n  async componentDidMount() {\n\n      if (typeof window.ethereum !== 'undefined') {           \n        var resultado = await window.ethereum.request({ method: 'eth_requestAccounts' });\n          console.log(resultado[0]);\n          this.setState({\n            currentAccount: resultado[0],\n            metamask: true,\n            conectado: true\n          })\n\n      } else {          \n        this.setState({\n          metamask: false,\n          conectado: false\n        })      \n      }\n\n      setInterval(async() => {\n        if (typeof window.ethereum !== 'undefined') {           \n          var resultado = await window.ethereum.request({ method: 'eth_requestAccounts' });\n            console.log(resultado[0]);\n            this.setState({\n              currentAccount: resultado[0],\n              metamask: true,\n              conectado: true\n            })\n  \n        } else {          \n          this.setState({\n            metamask: false,\n            conectado: false\n          })      \n        }\n\n      },7*1000);\n\n\n    try {         \n      var web3 = new Web3(window.web3.currentProvider);// mainet... metamask\n      var contractToken = new web3.eth.Contract(\n        abiToken,\n        addressToken\n      );\n      var contractBinary = new web3.eth.Contract(\n        abiBinario,\n        addressBinary\n      );\n      var isAdmin = true;//await contractBinary.methods.admin(this.state.currentAccount).call({from:this.state.currentAccount});\n\n      this.setState({\n        admin: isAdmin,\n        binanceM:{\n          web3: web3,\n          contractToken: contractToken,\n          contractBinary: contractBinary\n        }\n      })\n      //web3 = new Web3(new Web3.providers.HttpProvider(\"https://data-seed-prebsc-1-s1.binance.org:8545/\"));\n    } catch (error) {\n        alert(error);\n    }  \n\n    \n     \n    \n  }\n\n\n  render() {\n\n    var getString = \"\";\n    var loc = document.location.href;\n    //console.log(loc);\n    if(loc.indexOf('?')>0){\n              \n      getString = loc.split('?')[1];\n      getString = getString.split('#')[0];\n\n    }\n\n    if (!this.state.metamask) return (\n      <>\n        <div className=\"container\">\n          <TronLinkGuide />\n        </div>\n      </>\n      );\n\n    if (!this.state.conectado) return (\n      <>\n        <div className=\"container\">\n          <TronLinkGuide installed />\n        </div>\n      </>\n      );\n\n    switch (getString) {\n      case \"v1\": \n      case \"V1\": \n        return(<Home admin={this.state.admin} contractAddress={cons.SC2} version=\"4\" wallet={this.state.binanceM} currentAccount={this.state.currentAccount}/>);\n      case \"v2\":\n      case \"V2\": \n        return(<Home admin={this.state.admin} contractAddress={cons.SC2} version=\"4\" wallet={this.state.binanceM} currentAccount={this.state.currentAccount}/>);\n      case \"shasta\":\n      case \"test\":\n      case \"v0\":\n      case \"V0\": \n        return(<Home admin={this.state.admin} contractAddress={cons.SCtest} version=\"999\" wallet={this.state.binanceM} currentAccount={this.state.currentAccount}/>);\n      default:\n        return(<Home admin={this.state.admin} contractAddress={cons.SC2} version=\"4\" wallet={this.state.binanceM} currentAccount={this.state.currentAccount}/>);\n    }\n\n\n  }\n}\nexport default App;\n\n// {tWeb()}\n"]},"metadata":{},"sourceType":"module"}